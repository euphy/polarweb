<!DOCTYPE html>
<html>
  <head>
    <title>{{machine_name}} video</title>
  </head>
  <body>
    <img id="stream" src="">
<script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        namespace = '/stream';
        var stream_socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
        stream_socket.on('connect', function() {
            stream_socket.emit('guess', {data: 'stream socket is connected in javascript!'});
        });

        stream_socket.emit('feed', {data: true});
        stream_socket.on('feed_response', function(msg) {
            console.log('Feed response got: '+msg);
            console.log(msg);
            $("#stream").attr('src', 'data:image/jpg;base64,'+msg.frame);
        });

    });
</script>
  </body>
</html>